(()=>{var H=e=>new Promise(o=>setTimeout(o,e)),P=e=>{let o=GetEntityModel(e),a=GetHashKey("mp_m_freemode_01"),t=GetHashKey("mp_f_freemode_01");return o===a||o===t},b=e=>{let o=GetEntityModel(e),a=GetHashKey("mp_m_freemode_01");return o===a};function v(e){return{x:e[0],y:e[1],z:e[2]}}var le=()=>{let e=PlayerPedId(),o=GetEntityHealth(e),a=GetPedArmour(e);return[o,a]},se=(e,o)=>{let a=PlayerPedId();SetEntityHealth(a,e),SetPedArmour(a,o)};var O=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,1,2,6,7],F=["noseWidth","nosePeakHigh","nosePeakSize","noseBoneHigh","nosePeakLowering","noseBoneTwist","eyeBrownHigh","eyeBrownForward","cheeksBoneHigh","cheeksBoneWidth","cheeksWidth","eyesOpening","lipsThickness","jawBoneWidth","jawBoneBackSize","chinBoneLowering","chinBoneLenght","chinBoneSize","chinHole","neckThickness"],M=["blemishes","beard","eyebrows","ageing","makeUp","blush","complexion","sunDamage","lipstick","moleAndFreckles","chestHair","bodyBlemishes"],ce=["Green","Emerald","Light Blue","Ocean Blue","Light Brown","Dark Brown","Hazel","Dark Gray","Light Gray","Pink","Yellow","Purple","Blackout","Shades of Gray","Tequila Sunrise","Atomic","Warp","ECola","Space Ranger","Ying Yang","Bullseye","Lizard","Dragon","Extra Terrestrial","Goat","Smiley","Possessed","Demon","Infected","Alien","Undead","Zombie"],de={male:[{id:0,collection:"mpbeach_overlays",overlay:"FM_Hair_Fuzz"},{id:1,collection:"multiplayer_overlays",overlay:"NG_M_Hair_001"},{id:2,collection:"multiplayer_overlays",overlay:"NG_M_Hair_002"},{id:3,collection:"multiplayer_overlays",overlay:"NG_M_Hair_003"},{id:4,collection:"multiplayer_overlays",overlay:"NG_M_Hair_004"},{id:5,collection:"multiplayer_overlays",overlay:"NG_M_Hair_005"},{id:6,collection:"multiplayer_overlays",overlay:"NG_M_Hair_006"},{id:7,collection:"multiplayer_overlays",overlay:"NG_M_Hair_007"},{id:8,collection:"multiplayer_overlays",overlay:"NG_M_Hair_008"},{id:9,collection:"multiplayer_overlays",overlay:"NG_M_Hair_009"},{id:10,collection:"multiplayer_overlays",overlay:"NG_M_Hair_013"},{id:11,collection:"multiplayer_overlays",overlay:"NG_M_Hair_002"},{id:12,collection:"multiplayer_overlays",overlay:"NG_M_Hair_011"},{id:13,collection:"multiplayer_overlays",overlay:"NG_M_Hair_012"},{id:14,collection:"multiplayer_overlays",overlay:"NG_M_Hair_014"},{id:15,collection:"multiplayer_overlays",overlay:"NG_M_Hair_015"},{id:16,collection:"multiplayer_overlays",overlay:"NGBea_M_Hair_000"},{id:17,collection:"multiplayer_overlays",overlay:"NGBea_M_Hair_001"},{id:18,collection:"multiplayer_overlays",overlay:"NGBus_M_Hair_000"},{id:19,collection:"multiplayer_overlays",overlay:"NGBus_M_Hair_001"},{id:20,collection:"multiplayer_overlays",overlay:"NGHip_M_Hair_000"},{id:21,collection:"multiplayer_overlays",overlay:"NGHip_M_Hair_001"},{id:22,collection:"multiplayer_overlays",overlay:"NGInd_M_Hair_000"},{id:24,collection:"mplowrider_overlays",overlay:"LR_M_Hair_000"},{id:25,collection:"mplowrider_overlays",overlay:"LR_M_Hair_001"},{id:26,collection:"mplowrider_overlays",overlay:"LR_M_Hair_002"},{id:27,collection:"mplowrider_overlays",overlay:"LR_M_Hair_003"},{id:28,collection:"mplowrider2_overlays",overlay:"LR_M_Hair_004"},{id:29,collection:"mplowrider2_overlays",overlay:"LR_M_Hair_005"},{id:30,collection:"mplowrider2_overlays",overlay:"LR_M_Hair_006"},{id:31,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_000_M"},{id:32,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_001_M"},{id:33,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_002_M"},{id:34,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_003_M"},{id:35,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_004_M"},{id:36,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_005_M"},{id:72,collection:"mpgunrunning_overlays",overlay:"MP_Gunrunning_Hair_M_000_M"},{id:73,collection:"mpgunrunning_overlays",overlay:"MP_Gunrunning_Hair_M_001_M"},{id:74,collection:"mpVinewood_overlays",overlay:"MP_Vinewood_Hair_M_000_M"}],female:[{id:0,collection:"mpbeach_overlays",overlay:"FM_Hair_Fuzz"},{id:1,collection:"multiplayer_overlays",overlay:"NG_F_Hair_001"},{id:2,collection:"multiplayer_overlays",overlay:"NG_F_Hair_002"},{id:3,collection:"multiplayer_overlays",overlay:"NG_F_Hair_003"},{id:4,collection:"multiplayer_overlays",overlay:"NG_F_Hair_004"},{id:5,collection:"multiplayer_overlays",overlay:"NG_F_Hair_005"},{id:6,collection:"multiplayer_overlays",overlay:"NG_F_Hair_006"},{id:7,collection:"multiplayer_overlays",overlay:"NG_F_Hair_007"},{id:8,collection:"multiplayer_overlays",overlay:"NG_F_Hair_008"},{id:9,collection:"multiplayer_overlays",overlay:"NG_F_Hair_009"},{id:10,collection:"multiplayer_overlays",overlay:"NG_F_Hair_010"},{id:11,collection:"multiplayer_overlays",overlay:"NG_F_Hair_011"},{id:12,collection:"multiplayer_overlays",overlay:"NG_F_Hair_012"},{id:13,collection:"multiplayer_overlays",overlay:"NG_F_Hair_013"},{id:14,collection:"multiplayer_overlays",overlay:"NG_M_Hair_014"},{id:15,collection:"multiplayer_overlays",overlay:"NG_M_Hair_015"},{id:16,collection:"multiplayer_overlays",overlay:"NGBea_F_Hair_000"},{id:17,collection:"multiplayer_overlays",overlay:"NGBea_F_Hair_001"},{id:18,collection:"multiplayer_overlays",overlay:"NG_F_Hair_007"},{id:19,collection:"multiplayer_overlays",overlay:"NGBus_F_Hair_000"},{id:20,collection:"multiplayer_overlays",overlay:"NGBus_F_Hair_001"},{id:21,collection:"multiplayer_overlays",overlay:"NGBea_F_Hair_001"},{id:22,collection:"multiplayer_overlays",overlay:"NGHip_F_Hair_000"},{id:23,collection:"multiplayer_overlays",overlay:"NGInd_F_Hair_000"},{id:25,collection:"mplowrider_overlays",overlay:"LR_F_Hair_000"},{id:26,collection:"mplowrider_overlays",overlay:"LR_F_Hair_001"},{id:27,collection:"mplowrider_overlays",overlay:"LR_F_Hair_002"},{id:28,collection:"mplowrider2_overlays",overlay:"LR_F_Hair_003"},{id:29,collection:"mplowrider2_overlays",overlay:"LR_F_Hair_003"},{id:30,collection:"mplowrider2_overlays",overlay:"LR_F_Hair_004"},{id:31,collection:"mplowrider2_overlays",overlay:"LR_F_Hair_006"},{id:32,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_000_F"},{id:33,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_001_F"},{id:34,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_002_F"},{id:35,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_003_F"},{id:36,collection:"multiplayer_overlays",overlay:"NG_F_Hair_003"},{id:37,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_006_F"},{id:38,collection:"mpbiker_overlays",overlay:"MP_Biker_Hair_004_F"},{id:76,collection:"mpgunrunning_overlays",overlay:"MP_Gunrunning_Hair_F_000_F"},{id:77,collection:"mpgunrunning_overlays",overlay:"MP_Gunrunning_Hair_F_001_F"},{id:78,collection:"mpVinewood_overlays",overlay:"MP_Vinewood_Hair_F_000_F"}]},_e={ped:!0,headBlend:!0,faceFeatures:!0,headOverlays:!0,components:!0,props:!0,tattoos:!0,allowExit:!0,automaticFade:!0},W={head:{animations:{on:{dict:"mp_masks@standard_car@ds@",anim:"put_on_mask",move:51,duration:600},off:{dict:"missheist_agency2ahelmet",anim:"take_off_helmet_stand",move:51,duration:1200}},props:{male:[[1,0]],female:[[1,0]]}},body:{animations:{on:{dict:"clothingtie",anim:"try_tie_negative_a",move:51,duration:1200},off:{dict:"clothingtie",anim:"try_tie_negative_a",move:51,duration:1200}},props:{male:[[11,252],[3,15],[8,15],[10,0],[5,0]],female:[[11,15],[8,14],[3,15],[10,0],[5,0]]}},bottom:{animations:{on:{dict:"re@construction",anim:"out_of_breath",move:51,duration:1300},off:{dict:"re@construction",anim:"out_of_breath",move:51,duration:1300}},props:{male:[[4,61],[6,34]],female:[[4,15],[6,35]]}}};function ue(){RegisterNuiCallbackType("appearance_get_locales"),RegisterNuiCallbackType("appearance_get_settings_and_data"),RegisterNuiCallbackType("appearance_set_camera"),RegisterNuiCallbackType("appearance_turn_around"),RegisterNuiCallbackType("appearance_rotate_camera"),RegisterNuiCallbackType("appearance_change_model"),RegisterNuiCallbackType("appearance_change_head_blend"),RegisterNuiCallbackType("appearance_change_face_feature"),RegisterNuiCallbackType("appearance_change_hair"),RegisterNuiCallbackType("appearance_change_head_overlay"),RegisterNuiCallbackType("appearance_change_eye_color"),RegisterNuiCallbackType("appearance_change_component"),RegisterNuiCallbackType("appearance_change_component_collection"),RegisterNuiCallbackType("appearance_change_prop"),RegisterNuiCallbackType("appearance_change_prop_collection"),RegisterNuiCallbackType("appearance_apply_tattoo"),RegisterNuiCallbackType("appearance_preview_tattoo"),RegisterNuiCallbackType("appearance_delete_tattoo"),RegisterNuiCallbackType("appearance_wear_clothes"),RegisterNuiCallbackType("appearance_remove_clothes"),RegisterNuiCallbackType("appearance_save"),RegisterNuiCallbackType("appearance_exit"),on("__cfx_nui:appearance_get_locales",(e,o)=>{let a=LoadResourceFile(GetCurrentResourceName(),`locales/${GetConvar("fivem-appearance:locale","en")}.json`);o(a)}),on("__cfx_nui:appearance_get_settings_and_data",(e,o)=>{let a=me(),t=J(),r=q();o({config:a,appearanceData:t,appearanceSettings:r})}),on("__cfx_nui:appearance_set_camera",(e,o)=>{o({}),Q(e)}),on("__cfx_nui:appearance_turn_around",(e,o)=>{o({}),pe(PlayerPedId())}),on("__cfx_nui:appearance_rotate_camera",(e,o)=>{o({}),ye(e)}),on("__cfx_nui:appearance_change_model",async(e,o)=>{await V(e);let a=PlayerPedId();SetEntityHeading(PlayerPedId(),j),SetEntityInvincible(a,!0),TaskStandStill(a,-1);let t=C(a),r=q();o({appearanceSettings:r,appearanceData:t})}),on("__cfx_nui:appearance_change_component",(e,o)=>{let a=PlayerPedId(),{component_id:t,collection:r,drawable:n,texture:i}=e;G(a,t,{collection:r,drawable:n,texture:i}),o(L(a,t))}),on("__cfx_nui:appearance_change_prop",(e,o)=>{let a=PlayerPedId(),{prop_id:t,collection:r,drawable:n,texture:i}=e;S(a,t,{collection:r,drawable:n,texture:i}),o(z(a,t))}),on("__cfx_nui:appearance_change_component_collection",(e,o)=>{let a=PlayerPedId(),{component_id:t,collection:r}=e;G(a,t,{collection:r,drawable:0,texture:0});let n=L(a,t),i=Z(a,t);o({settings:n,collections:i})}),on("__cfx_nui:appearance_change_prop_collection",(e,o)=>{let a=PlayerPedId(),{prop_id:t,collection:r}=e;S(a,t,{collection:r,drawable:0,texture:0});let n=z(a,t),i=$(a,t);o({settings:n,collections:i})}),on("__cfx_nui:appearance_change_head_blend",(e,o)=>{o({}),N(PlayerPedId(),e)}),on("__cfx_nui:appearance_change_face_feature",(e,o)=>{o({}),T(PlayerPedId(),e)}),on("__cfx_nui:appearance_change_head_overlay",(e,o)=>{o({}),k(PlayerPedId(),e)}),on("__cfx_nui:appearance_change_hair",(e,o)=>{o({}),A(PlayerPedId(),e)}),on("__cfx_nui:appearance_change_eye_color",(e,o)=>{o({}),D(PlayerPedId(),e)}),on("__cfx_nui:appearance_apply_tattoo",(e,o)=>{o({}),fe(PlayerPedId(),e)}),on("__cfx_nui:appearance_preview_tattoo",(e,o)=>{o({});let{data:a,tattoo:t}=e;be(PlayerPedId(),a,t)}),on("__cfx_nui:appearance_delete_tattoo",(e,o)=>{o({}),ge(PlayerPedId(),e)}),on("__cfx_nui:appearance_wear_clothes",(e,o)=>{o({});let{data:a,key:t}=e;Pe(a,t)}),on("__cfx_nui:appearance_remove_clothes",(e,o)=>{o({}),ve(e)}),on("__cfx_nui:appearance_save",(e,o)=>{o({}),Y(e)}),on("__cfx_nui:appearance_exit",(e,o)=>{o({}),Y()})}var Oe=global.exports,Ce={default:{coords:{x:0,y:2.2,z:.2},point:{x:0,y:0,z:-.05}},head:{coords:{x:0,y:.9,z:.65},point:{x:0,y:0,z:.6}},body:{coords:{x:0,y:1.2,z:.2},point:{x:0,y:0,z:.2}},bottom:{coords:{x:0,y:.98,z:-.7},point:{x:0,y:0,z:-.9}}},Be={default:{x:1.5,y:-1},head:{x:.7,y:-.45},body:{x:1.2,y:-.45},bottom:{x:.7,y:-.45}},U,X,E,w,j,p,R,h,f,he={};function Le(){let e={hair:[],makeUp:[]};for(let o=0;o<GetNumHairColors();o++)e.hair.push(GetPedHairRgbColor(o));for(let o=0;o<GetNumMakeupColors();o++)e.makeUp.push(GetMakeupRgbColor(o));return e}function J(){return E||(E=C(PlayerPedId())),E}function Z(e,o){return ae().map(({name:t,label:r})=>{let n=GetNumberOfPedCollectionDrawableVariations(e,o,t);return{name:t,label:r,drawableCount:n}}).filter(t=>t.drawableCount>0)}function L(e,o){let a=GetPedDrawableVariationCollectionName(e,o)||"",t=GetPedDrawableVariationCollectionLocalIndex(e,o),n=Fe()[a]?.[o]||[],i,l;if(P(e))i=GetNumberOfPedCollectionDrawableVariations(e,o,a)-1,l=GetNumberOfPedCollectionTextureVariations(e,o,a,t)-1;else{let c=GetPedDrawableVariation(e,o);i=GetNumberOfPedDrawableVariations(e,o)-1,l=GetNumberOfPedTextureVariations(e,o,c)-1}return{component_id:o,drawable:{min:0,max:i},texture:{min:0,max:l},collections:Z(e,o),excludedIndices:n}}function $(e,o){return ae().map(({name:t,label:r})=>{let n=GetNumberOfPedCollectionPropDrawableVariations(e,o,t);return{name:t,label:r,drawableCount:n}}).filter(t=>t.drawableCount>0)}function z(e,o){let a=GetPedPropIndex(e,o),t=GetPedCollectionNameFromProp(e,o,a)||"",n=Me()[t]?.[o]||[],i,l;if(P(e)){i=GetNumberOfPedCollectionPropDrawableVariations(e,o,t)-1;let c=GetPedCollectionLocalIndexFromProp(e,o,a);l=GetNumberOfPedCollectionPropTextureVariations(e,o,t,c)-1}else i=GetNumberOfPedPropDrawableVariations(e,o)-1,l=GetNumberOfPedPropTextureVariations(e,o,a)-1;return{prop_id:o,drawable:{min:-1,max:i},texture:{min:-1,max:l},collections:$(e,o),excludedIndices:n}}function q(){let e=PlayerPedId(),o={model:{items:oe()}},a={items:He},t=O.map(u=>L(e,u)),r=B.map(u=>z(e,u)),n={shapeFirst:{min:0,max:45},shapeSecond:{min:0,max:45},skinFirst:{min:0,max:45},skinSecond:{min:0,max:45},shapeMix:{min:0,max:1,factor:.1},skinMix:{min:0,max:1,factor:.1}},i=F.reduce((u,y)=>({...u,[y]:{min:-1,max:1,factor:.1}}),{}),l=Le(),s={beard:l.hair,eyebrows:l.hair,chestHair:l.hair,makeUp:l.makeUp,blush:l.makeUp,lipstick:l.makeUp},c=M.reduce((u,y,g)=>{let x={style:{min:0,max:GetPedHeadOverlayNum(g)-1},opacity:{min:0,max:1,factor:.1}};return s[y]&&Object.assign(x,{color:{items:s[y]}}),{...u,[y]:x}},{}),_={style:{min:0,max:GetNumberOfPedDrawableVariations(e,2)-1},color:{items:l.hair},highlight:{items:l.hair}};return{ped:o,components:t,props:r,headBlend:n,faceFeatures:i,headOverlays:c,hair:_,eyeColor:{min:0,max:30},tattoos:a}}function me(){return X}function Q(e){if(f)return;e!=="current"&&(R=e);let{coords:o,point:a}=Ce[R],t=h?-1:1;if(p){let r=v(GetOffsetFromEntityInWorldCoords(PlayerPedId(),o.x*t,o.y*t,o.z)),n=v(GetOffsetFromEntityInWorldCoords(PlayerPedId(),a.x,a.y,a.z)),i=CreateCameraWithParams("DEFAULT_SCRIPTED_CAMERA",r.x,r.y,r.z,0,0,0,50,!1,0);PointCamAtCoord(i,n.x,n.y,n.z),SetCamActiveWithInterp(i,p,1e3,1,1),f=!0;let l=setInterval(()=>{!IsCamInterpolating(p)&&IsCamActive(i)&&(DestroyCam(p,!1),p=i,f=!1,clearInterval(l))},500)}else{let r=v(GetOffsetFromEntityInWorldCoords(PlayerPedId(),o.x,o.y,o.z)),n=v(GetOffsetFromEntityInWorldCoords(PlayerPedId(),a.x,a.y,a.z));p=CreateCameraWithParams("DEFAULT_SCRIPTED_CAMERA",r.x,r.y,r.z,0,0,0,50,!1,0),PointCamAtCoord(p,n.x,n.y,n.z),SetCamActive(p,!0)}}async function ye(e){if(f)return;let{coords:o,point:a}=Ce[R],t=Be[R],r,n=h?-1:1;e==="left"?r=1:e==="right"&&(r=-1);let i=v(GetOffsetFromEntityInWorldCoords(PlayerPedId(),(o.x+t.x)*r*n,(o.y+t.y)*n,o.z)),l=v(GetOffsetFromEntityInWorldCoords(PlayerPedId(),a.x,a.y,a.z)),s=CreateCameraWithParams("DEFAULT_SCRIPTED_CAMERA",i.x,i.y,i.z,0,0,0,50,!1,0);PointCamAtCoord(s,l.x,l.y,l.z),SetCamActiveWithInterp(s,p,1e3,1,1),f=!0;let c=setInterval(()=>{!IsCamInterpolating(p)&&IsCamActive(s)&&(DestroyCam(p,!1),p=s,f=!1,clearInterval(c))},500)}function pe(e){h=!h;let o=OpenSequenceTask()??0;o!==0&&(TaskGoStraightToCoord(0,w.x,w.y,w.z,8,-1,GetEntityHeading(e)-180,.1),TaskStandStill(0,-1),CloseSequenceTask(o),ClearPedTasks(e),TaskPerformSequence(e,o),ClearSequenceTask(o))}async function Pe(e,o){let{animations:a,props:t}=W[o],{dict:r,anim:n,move:i,duration:l}=a.on,{male:s,female:c}=t,{components:_}=e,m=PlayerPedId(),u=b(m);for(RequestAnimDict(r);!HasAnimDictLoaded(r);)await H(0);let y=u?s:c;for(let g=0;g<y.length;g++){let[x]=y[g],K=_[x];K&&SetPedComponentVariation(m,x,K.drawable,K.texture,2)}TaskPlayAnim(m,r,n,3,3,l,i,0,!1,!1,!1)}async function ve(e){let{animations:o,props:a}=W[e],{dict:t,anim:r,move:n,duration:i}=o.off,{male:l,female:s}=a,c=PlayerPedId(),_=b(c);for(RequestAnimDict(t);!HasAnimDictLoaded(t);)await H(0);if(_)for(let m=0;m<l.length;m++){let[u,y]=l[m];SetPedComponentVariation(c,u,y,0,2)}else for(let m=0;m<s.length;m++){let[u,y]=s[m];SetPedComponentVariation(c,u,y,0,2)}TaskPlayAnim(c,t,r,3,3,i,n,0,!1,!1,!1)}var ee=()=>he,I=(e,o)=>{he=o;let a=b(e);ClearPedDecorations(e);for(let t in o)for(let r=0;r<o[t].length;r++){let{collection:n,hashFemale:i,hashMale:l}=o[t][r],s=a?l:i;AddPedDecorationFromHashes(e,GetHashKey(n),GetHashKey(s))}},fe=(e,o)=>{let a=b(e);ClearPedDecorations(e);for(let t in o)for(let r=0;r<o[t].length;r++){let{collection:n,hashFemale:i,hashMale:l}=o[t][r],s=a?l:i;AddPedDecorationFromHashes(e,GetHashKey(n),GetHashKey(s))}},ge=(e,o)=>{let a=b(e);ClearPedDecorations(e);for(let t in o)for(let r=0;r<o[t].length;r++){let{collection:n,hashFemale:i,hashMale:l}=o[t][r],s=a?l:i;AddPedDecorationFromHashes(e,GetHashKey(n),GetHashKey(s))}},be=(e,o,a)=>{let t=b(e),{collection:r,hashFemale:n,hashMale:i}=a,l=t?i:n;ClearPedDecorations(e),AddPedDecorationFromHashes(e,GetHashKey(r),GetHashKey(l));for(let s in o)for(let c=0;c<o[s].length;c++){let{name:_,collection:m,hashFemale:u,hashMale:y}=o[s][c];if(a.name!==_){let g=t?y:u;AddPedDecorationFromHashes(e,GetHashKey(m),GetHashKey(g))}}};function ze(e,o=_e){let a=PlayerPedId();E=C(a),U=e,o.automaticFade=Boolean(GetConvarInt("fivem-appearance:automaticFade",1)),X=o,w=v(GetEntityCoords(a,!0)),j=GetEntityHeading(a),h=!1,f=!1,Q("default"),SetNuiFocus(!0,!0),SetNuiFocusKeepInput(!1),RenderScriptCams(!0,!1,0,!0,!0),DisplayRadar(!1),SetEntityInvincible(a,!0),TaskStandStill(a,-1);let t={type:"appearance_display",payload:{}};SendNuiMessage(JSON.stringify(t))}function Y(e){RenderScriptCams(!1,!1,0,!0,!0),DestroyCam(p,!1),DisplayRadar(!0),SetNuiFocus(!1,!1);let o=PlayerPedId();ClearPedTasksImmediately(o),SetEntityInvincible(o,!1);let a={type:"appearance_hide",payload:{}};if(SendNuiMessage(JSON.stringify(a)),!e)te(J());else{let{tattoos:t}=e;I(o,t)}U&&U(e),U=null,X=null,E=null,w=null,p=null,R=null,h=null,f=null}function Ve(e){e===GetCurrentResourceName()&&(SetNuiFocus(!1,!1),SetNuiFocusKeepInput(!1))}function Ue(){ue(),on("onResourceStop",Ve),Oe("startPlayerCustomization",ze)}var xe={loadModule:Ue};var d=global.exports,Ke="0x2746bd9d88c5c5d0",We=Boolean(Number(GetConvar("fivem-appearance:automaticFade","1"))),He=JSON.parse(LoadResourceFile(GetCurrentResourceName(),"tattoos.json")),Ge=[],Se={};function qe(e){Ge=e,Se=e.reduce((o,a)=>({...o,[GetHashKey(a.model)]:a.model}),{})}function oe(){return Ge}var re=[{name:"",label:"Base Game"}],Ne={},Te={};function Ye(e){re=e}function ae(){return re}function mo(e){return re.find(o=>o.name===e)?.label||e||"Base Game"}function je(e){Ne=e}function Fe(){return Ne}function Je(e){Te=e}function Me(){return Te}function ke(e){return Se[GetEntityModel(e)]}function Ae(e){let o={},a=P(e);return O.forEach(t=>{let r="",n=GetPedDrawableVariation(e,t);a&&(r=GetPedDrawableVariationCollectionName(e,t)||"",n=GetPedDrawableVariationCollectionLocalIndex(e,t)),o[t]={collection:r,drawable:n,texture:GetPedTextureVariation(e,t)}}),o}function De(e){let o={},a=P(e);return B.forEach(t=>{let r="",n=GetPedPropIndex(e,t);if(a){let i=n;r=GetPedCollectionNameFromProp(e,t,i)||"",n=GetPedCollectionLocalIndexFromProp(e,t,i)}o[t]={collection:r,drawable:n,texture:GetPedPropTextureIndex(e,t)}}),o}function Ee(e){let o=new ArrayBuffer(80);global.Citizen.invokeNative(Ke,e,new Uint32Array(o));let{0:a,2:t,6:r,8:n}=new Uint32Array(o),{0:i,2:l}=new Float32Array(o,48),s=parseFloat(i.toFixed(1)),c=parseFloat(l.toFixed(1));return{shapeFirst:a,shapeSecond:t,skinFirst:r,skinSecond:n,shapeMix:s,skinMix:c}}function we(e){return F.reduce((a,t,r)=>{let n=parseFloat(GetPedFaceFeature(e,r).toFixed(1));return{...a,[t]:n}},{})}function Re(e){return M.reduce((a,t,r)=>{let[,n,,i,,l]=GetPedHeadOverlayData(e,r),s=n!==255,c=s?n:0,_=s?parseFloat(l.toFixed(1)):0;return{...a,[t]:{style:c,opacity:_,color:i}}},{})}function Ie(e){return{style:GetPedDrawableVariation(e,2),color:GetPedHairColor(e),highlight:GetPedHairHighlightColor(e)}}function Ze(e){let o=GetEntityModel(e),a;return o===GetHashKey("mp_m_freemode_01")?a="male":o===GetHashKey("mp_f_freemode_01")&&(a="female"),a}function $e(e,o){let a=Ze(e);return a?de[a].find(r=>r.id===o):void 0}function C(e){let o=GetPedEyeColor(e);return{model:ke(e)||"mp_m_freemode_01",headBlend:Ee(e),faceFeatures:we(e),headOverlays:Re(e),components:Ae(e),props:De(e),hair:Ie(e),eyeColor:o<ce.length?o:0,tattoos:ee()}}async function V(e){if(!e||!IsModelInCdimage(e))return;for(RequestModel(e);!HasModelLoaded(e);)await H(0);let[o,a]=le();SetPlayerModel(PlayerId(),e),SetModelAsNoLongerNeeded(e);let t=PlayerPedId();P(t)&&(SetPedDefaultComponentVariation(t),SetPedHeadBlendData(t,0,0,0,0,0,0,0,0,0,!1)),se(o,a)}function N(e,o){if(!o)return;let{shapeFirst:a,shapeSecond:t,shapeMix:r,skinFirst:n,skinSecond:i,skinMix:l}=o;P(e)&&SetPedHeadBlendData(e,a,t,0,n,i,0,r,l,0,!1)}function T(e,o){!o||F.forEach((a,t)=>{let r=o[a];SetPedFaceFeature(e,t,r)})}function k(e,o){!o||M.forEach((a,t)=>{let r=o[a];if(SetPedHeadOverlay(e,t,r.style,r.opacity),r.color||r.color===0){let n=1;({blush:!0,lipstick:!0,makeUp:!0})[a]&&(n=2),SetPedHeadOverlayColor(e,t,n,r.color,r.secondColor)}})}function A(e,o){if(!o)return;let{style:a,color:t,highlight:r}=o;if(SetPedComponentVariation(e,2,a,0,0),SetPedHairColor(e,t,r),We){let n=$e(e,a);if(ClearPedDecorations(e),n){let{collection:i,overlay:l}=n;AddPedDecorationFromHashes(e,GetHashKey(i),GetHashKey(l))}}}function D(e,o){!o||SetPedEyeColor(e,o)}function G(e,o,a){if(!a)return;let{collection:t,drawable:r,texture:n}=a;({0:!0,2:!0})[o]&&P(e)||(P(e)?SetPedCollectionComponentVariation(e,o,t,r,n,0):SetPedComponentVariation(e,o,r,n,0))}function ne(e,o){!o||Object.entries(o).forEach(([a,t])=>{G(e,Number(a),t)})}function S(e,o,a){if(!a)return;let{collection:t,drawable:r,texture:n}=a;if(r===-1){ClearPedProp(e,o);return}P(e)?SetPedCollectionPropIndex(e,o,t,r,n,!1):SetPedPropIndex(e,o,r,n,!1)}function ie(e,o){!o||Object.entries(o).forEach(([a,t])=>{S(e,Number(a),t)})}async function te(e){if(!e)return;let{model:o,components:a,props:t,headBlend:r,faceFeatures:n,headOverlays:i,hair:l,eyeColor:s,tattoos:c}=e;await V(o);let _=PlayerPedId();ne(_,a),ie(_,t),r&&N(_,r),n&&T(_,n),i&&k(_,i),l&&A(_,l),s&&D(_,s),c&&I(_,c)}function Qe(e,o){if(!o)return;let{components:a,props:t,headBlend:r,faceFeatures:n,headOverlays:i,hair:l,eyeColor:s,tattoos:c}=o;ne(e,a),ie(e,t),r&&N(e,r),n&&T(e,n),i&&k(e,i),l&&A(e,l),s&&D(e,s),c&&I(e,c)}xe.loadModule(),d("getPedModel",ke),d("getPedModels",oe),d("getPedComponents",Ae),d("getPedProps",De),d("getPedHeadBlend",Ee),d("getPedFaceFeatures",we),d("getPedHeadOverlays",Re),d("getPedHair",Ie),d("getPedTattoos",ee),d("getPedAppearance",C),d("setPedModels",qe),d("setCollectionLabels",Ye),d("setExcludedComponentIndices",je),d("setExcludedPropIndices",Je),d("setPlayerModel",V),d("setPedHeadBlend",N),d("setPedFaceFeatures",T),d("setPedHeadOverlays",k),d("setPedHair",A),d("setPedEyeColor",D),d("setPedComponent",G),d("setPedComponents",ne),d("setPedProp",S),d("setPedProps",ie),d("setPedTattoos",I),d("setPlayerAppearance",te),d("setPedAppearance",Qe);})();
